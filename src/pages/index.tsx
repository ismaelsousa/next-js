
import { GetServerSideProps } from 'next'
import { useCallback } from 'react'
import SEO from '~/components/SEO'
import {Title} from '../styles/pages/Home'
interface IProduct {
  id:string;
  title:string
}

interface HomeProps {
 recommendedProducts:IProduct[]
}

export default function Home({recommendedProducts}:HomeProps) {
  const handleSum = useCallback(async ()=>{
    const math = (await import('../lib/math')).default
   alert( math.sum(3,3))
  },[])

  return (
  <div>
    <SEO 
      title='Products' 
      shouldExcludeTitleSuffix
      image='data:image/jpeg;base64,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'
    />
    <section>
      <Title>Products</Title>
      <ul>
        {recommendedProducts.map(recommendedProduct=>{
          return (
            <li key={recommendedProduct.id}>
              {recommendedProduct.title}
            </li>
          )
        })}
      </ul>
    </section>
    <button onClick={handleSum}>Sum</button>
  </div>
  )
}

export const getServerSideProps: GetServerSideProps<HomeProps> = async ()=>{
  const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/recommended`) 
  const recommendedProducts = await response.json()
  return {
    props:{
      recommendedProducts
    }
  }
}